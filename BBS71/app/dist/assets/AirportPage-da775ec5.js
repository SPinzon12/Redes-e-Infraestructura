import{_ as k,i as S,o as i,c as a,b as t,n as y,j as D,t as d,w as F,v as N,a as c,F as b,r as C,g as _,h as f,k as I,p as w,e as T,D as W,l as L}from"./index-6d3d8767.js";import{N as B,F as P}from"./Footer-8c9ad2a0.js";import{S as M}from"./SlideBar-89692e39.js";const O={components:{FlightCard:S},props:{tableName:{type:String,required:!0},flights:{type:Array,required:!0},flightType:{type:String,required:!0,validator:o=>["arrivals","departures"].includes(o)}},data(){return{filterField:"",selectedFlight:null,page:1,perPage:10,pages:[],totalFlights:0}},computed:{filteredFlights(){const o=this.flights.filter(r=>{const l=this.filterField.toLowerCase(),u=r.airline.name.toLowerCase(),e=r.route.from.origin.toLowerCase(),n=r.route.to.dest.toLowerCase(),p=r.flightInfo.flightNumber.toLowerCase();if(this.flightType==="arrivals")return r.departure.airport.originCityName.toLowerCase().startsWith(l)||u.startsWith(l)||p.startsWith(l)||e.startsWith(l);const s=r.arrival.airport.destCityName.toLowerCase();return n.startsWith(l)||u.startsWith(l)||s.startsWith(l)||p.startsWith(l)});return this.totalFlights=o.length,this.paginate(o)},setFlights(){console.log(this.totalFlights);let o=Math.ceil(this.totalFlights/this.perPage);this.pages=[];for(let r=1;r<=o;r++)this.pages.push(r);return this.pages}},methods:{handleRowClick(o){console.log("Se hizo clic en la fila:",o),this.selectedFlight=o},closeCard(){this.selectedFlight=null},paginate(o){let r=this.page,l=this.perPage,u=r*l-l,e=r*l;return o.slice(u,e)}}},h=o=>(w("data-v-0f305e2b"),o=o(),T(),o),V={class:"container"},q={class:"form-group"},z={class:"table-name"},R={class:"table"},U={class:"table-dark"},$=h(()=>t("th",{scope:"col"},"Date",-1)),j=h(()=>t("th",{scope:"col"},"Scheduled time",-1)),E={key:0,scope:"col"},G=h(()=>t("th",{scope:"col"},"Airline",-1)),H={key:1,scope:"col"},J=h(()=>t("th",{scope:"col"},"Flight",-1)),K=h(()=>t("th",{scope:"col"},"Status",-1)),Q={class:"overflow-auto"},X=["onClick"],Y={class:"table-light"},Z={class:"table-light"},tt={key:0,class:"table-light"},et={class:"table-light"},st={key:1,class:"table-light"},ot={class:"table-light"},rt={key:0},lt=h(()=>t("tr",null,[t("td",{colspan:"6"},[t("div",{class:"alert alert-warning text-center",role:"alert"}," No flights found. ")])],-1)),it=[lt],at={class:"btn-toolbar",role:"toolbar","aria-label":"Toolbar with button groups"},nt={class:"btn-group mr-2 mx-auto",role:"group","aria-label":"Button group with nested dropdown"},ct=h(()=>t("i",{class:"fa-solid fa-angles-left"},null,-1)),dt=[ct],ht=["onClick"],_t=h(()=>t("i",{class:"fa-solid fa-angles-right"},null,-1)),ut=[_t],pt={key:0,class:"row"};function gt(o,r,l,u,e,n){const p=f("flight-card");return i(),a(b,null,[t("div",V,[t("div",q,[t("label",z,[t("i",{class:y(l.tableName==="Arrivals"?"fas fa-plane-arrival":"fas fa-plane-departure")},null,2),D(" "+d(l.tableName),1)]),F(t("input",{type:"text",class:"form-control","onUpdate:modelValue":r[0]||(r[0]=s=>e.filterField=s),placeholder:"Write the flight, airline or city..."},null,512),[[N,e.filterField]])]),t("table",R,[t("thead",U,[t("tr",null,[$,j,l.flightType==="arrivals"?(i(),a("th",E,"Origin")):c("",!0),G,l.flightType!=="arrivals"?(i(),a("th",H,"Destination")):c("",!0),J,K])]),t("tbody",Q,[(i(!0),a(b,null,C(n.filteredFlights,(s,g)=>(i(),a("tr",{key:s.id,onClick:m=>n.handleRowClick(s)},[t("td",Y,d(s.flightInfo.flightDate),1),t("td",Z,d(l.flightType==="arrivals"?s.arrival.crsArrTime:s.departure.crsDepTime),1),l.flightType==="arrivals"?(i(),a("td",tt,d(l.flightType==="arrivals"?s.route.from.origin:s.route.to.dest),1)):c("",!0),t("td",et,d(s.airline.name),1),l.flightType!=="arrivals"?(i(),a("td",st,d(l.flightType!=="arrivals"?s.route.to.dest:s.route.from.origin),1)):c("",!0),t("td",ot,d(s.flightInfo.flightNumber),1),t("td",{class:"table-light",style:I({color:s.flightInfo.isCancelled||s.flightInfo.isDiverted?"red":"green"})},[t("b",null,d(s.flightInfo.isDiverted?"Diverted":s.flightInfo.isCancelled?"Cancelled":"Arrived"),1)],4)],8,X))),128))]),n.filteredFlights.length===0?(i(),a("tbody",rt,it)):c("",!0)]),t("div",at,[t("div",nt,[e.page!=1?(i(),a("button",{key:0,onClick:r[1]||(r[1]=s=>e.page--),type:"button",class:"btn btn-warning"},dt)):c("",!0),(i(!0),a(b,null,C(n.setFlights.slice(e.page-1,e.page+2),(s,g)=>(i(),a("button",{key:g,onClick:m=>e.page=s,type:"button",class:y({"btn btn-warning":e.page!=s,"btn btn-dark":e.page==s})},d(s),11,ht))),128)),e.page<e.pages.length?(i(),a("button",{key:1,onClick:r[2]||(r[2]=s=>e.page++),type:"button",class:"btn btn-warning"},ut)):c("",!0)])])]),e.selectedFlight?(i(),a("div",pt,[_(p,{flight:e.selectedFlight,onClose:n.closeCard},null,8,["flight","onClose"])])):c("",!0)],64)}const ft=k(O,[["render",gt],["__scopeId","data-v-0f305e2b"]]);const bt={components:{FlightTable:ft,Navbar:B,Footer:P,SlideBar:M,DashboardCard:W},data(){return{showArrivals:!1,selected:0,menuOptions:[{title:"Arrivals/Departures",iconClass:"fa-regular fa-paper-plane fa-xl"},{title:"Airlines",iconClass:"fa-solid fa-cart-flatbed-suitcase fa-xl"},{title:"Flight routes",iconClass:"fa-solid fa-plane-up fa-xl"},{title:"Time on the runway",iconClass:"fa-solid fa-plane-departure fa-xl"},{title:"Dashboard",iconClass:"fa-solid fa-chart-line fa-xl"}]}},computed:{airport(){return this.$store.state.user.user.name},flights_departure(){return this.$store.state.airport.flights_departure},flights_arrival(){return this.$store.state.airport.flights_arrival},cards(){return this.$store.state.airport.cards}},methods:{onMenuOptionSelected(o){this.selected=o}},beforeMount(){this.$store.dispatch("airport/getFlightsDep",this.$store.state.user.user),this.$store.dispatch("airport/getFlightsArr",this.$store.state.user.user),this.$store.dispatch("airport/getCards",this.$store.state.user.user)}},v=o=>(w("data-v-3b52da7b"),o=o(),T(),o),vt={class:"container"},mt={class:"airport_name"},yt={class:"row"},Ct={class:"col-md-3"},kt={class:"col-md-9"},Ft={key:0},wt={class:"form-check form-switch"},Tt=v(()=>t("label",{class:"form-check-label",for:"showArrivals"},[t("b",null,"Arrivals/Departures")],-1)),xt={key:0,class:"table"},At={key:1,class:"table"},St={key:1},Dt=v(()=>t("h1",null,"Airlines",-1)),Nt=[Dt],It={key:2},Wt=v(()=>t("h1",null,"Flight routes",-1)),Lt=[Wt],Bt={key:3},Pt=v(()=>t("h1",null,"Time on the runway",-1)),Mt=[Pt],Ot={key:4};function Vt(o,r,l,u,e,n){const p=f("Navbar"),s=f("SlideBar"),g=f("FlightTable"),m=f("DashboardCard"),x=f("Footer");return i(),a(b,null,[_(p),t("div",vt,[t("h1",mt,"Airport: "+d(n.airport),1),t("div",yt,[t("div",Ct,[_(s,{"menu-options":e.menuOptions,selected:e.selected,onSelected:n.onMenuOptionSelected},null,8,["menu-options","selected","onSelected"])]),t("div",kt,[e.selected==0?(i(),a("div",Ft,[t("div",wt,[Tt,F(t("input",{class:"form-check-input",type:"checkbox",id:"showArrivals","onUpdate:modelValue":r[0]||(r[0]=A=>e.showArrivals=A)},null,512),[[L,e.showArrivals]])]),e.showArrivals?(i(),a("div",xt,[_(g,{tableName:"Departures",flights:n.flights_departure,flightType:"departures"},null,8,["flights"])])):(i(),a("div",At,[_(g,{tableName:"Arrivals",flights:n.flights_arrival,flightType:"arrivals"},null,8,["flights"])]))])):c("",!0),e.selected==1?(i(),a("div",St,Nt)):c("",!0),e.selected==2?(i(),a("div",It,Lt)):c("",!0),e.selected==3?(i(),a("div",Bt,Mt)):c("",!0),e.selected==4?(i(),a("div",Ot,[_(m,{cards:n.cards},null,8,["cards"])])):c("",!0)])])]),_(x)],64)}const Ut=k(bt,[["render",Vt],["__scopeId","data-v-3b52da7b"]]);export{Ut as default};
